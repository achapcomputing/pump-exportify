(this.webpackJsonppumpify=this.webpackJsonppumpify||[]).push([[0],{150:function(e,t){},183:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),i=n.n(r),c=n(27),s=n.n(c),o=n(83),l=n.n(o),u=n(13),d=n.n(u),h=(n(51),n(52),n(28)),p=n(84),b=n(29),j=n(16);h.b.add(p.a,b.a,b.d,b.b,b.c,j.a,j.d,j.c,j.b,j.e,j.g,j.f);var f=n(17),m=(n(99),n(100),n(31)),g=n(32),x=n(34),y=n(33),O=n(193),v=n(8),w=n.n(v),k=n(18),C=n(85),E=n.n(C),R=n(86);function T(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var S=new(n.n(R).a)({maxConcurrent:1,minTime:0});S.on("failed",function(){var e=Object(k.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(429===t.response.status&&n.retryCount<2)){e.next=4;break}return e.abrupt("return",1e3*(t.response.headers["retry-after"]||1)+1e3);case 4:if(401===t.response.status||429===t.response.status||0!==n.retryCount){e.next=7;break}return s.a.notify(t,(function(e){e.addMetadata("response",t.response),e.addMetadata("request",t.config),e.groupingHash="Retried Request"})),e.abrupt("return",1e3);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());S.wrap((function(e,t){return E.a.get(e,{headers:{Authorization:"Bearer "+t}})}));var P=function(e){Object(x.a)(n,e);var t=Object(y.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(g.a)(n,[{key:"authorize",value:function(){var e=T("app_client_id"),t=""!==T("change_user");""===e&&(e="b8267324f80b4a9b9ba8c410e566b844"),window.location.href="https://accounts.spotify.com/authorize?client_id="+e+"&redirect_uri="+encodeURIComponent([window.location.protocol,"//",window.location.host,window.location.pathname].join(""))+"&scope=user-library-read%20playlist-modify-public&response_type=token&show_dialog="+t}},{key:"render",value:function(){return Object(a.jsxs)(O.a,{id:"loginButton",type:"submit",variant:"outline-secondary",size:"lg",onClick:this.authorize,children:[Object(a.jsx)(f.a,{icon:["far","check-circle"],size:"sm"})," Get Started"]})}}]),n}(i.a.Component),_=function(e){Object(x.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){window.location.href="".concat(window.location.href.split("#")[0],"?change_user=true")},e}return Object(g.a)(n,[{key:"render",value:function(){return Object(a.jsx)(O.a,{id:"logoutButton",type:"submit",variant:"link",size:"lg",onClick:this.handleClick,title:"Change user",children:Object(a.jsx)(f.a,{icon:["fas","sign-out-alt"],size:"lg"})})}}]),n}(i.a.Component),N=n(14),A=n(188),z=n(189),B=n(190),I=n(192),M=n(194),D=n(195),F=n(191),L=n(196),G=n(35),U=n.n(G),q=n(87),H=new(n.n(q).a),K=Object(a.jsxs)(L.a,{children:[Object(a.jsx)(L.a.Title,{children:"Energy"}),Object(a.jsx)(L.a.Content,{children:"Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. For example, death metal has high energy, while a Bach prelude scores low on the scale. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy."})]}),J=Object(a.jsxs)(L.a,{children:[Object(a.jsx)(L.a.Title,{children:"Danceability"}),Object(a.jsx)(L.a.Content,{children:"Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity. A value of 0.0 is least danceable and 1.0 is most danceable."})]}),V=Object(a.jsxs)(L.a,{children:[Object(a.jsx)(L.a.Title,{children:"Tempo"}),Object(a.jsx)(L.a.Content,{children:"The overall estimated tempo of a track in beats per minute (BPM). In musical terminology, tempo is the speed or pace of a given piece and derives directly from the average beat duration."})]}),W=function(){var e="Pumpify Playlist",t=Object(r.useState)(7),n=Object(N.a)(t,2),i=n[0],c=n[1],s=Object(r.useState)(5),o=Object(N.a)(s,2),l=o[0],u=o[1],d=Object(r.useState)(120),h=Object(N.a)(d,2),p=h[0],b=h[1],j=Object(r.useState)($),f=Object(N.a)(j,2),m=f[0],g=f[1],x=Object(r.useState)(!1),y=Object(N.a)(x,2),v=y[0],C=y[1],E=Object(r.useState)(!1),R=Object(N.a)(E,2),T=R[0],S=R[1],P=Object(r.useState)(0),_=Object(N.a)(P,2),L=_[0],G=_[1],q=Object(r.useState)(e),W=Object(N.a)(q,2),Y=W[0],Q=W[1],X=Object(r.createRef)(),Z="",$="",ee=3e3,te=[],ne=[];function ae(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t}().access_token;e&&H.setAccessToken(e)}function re(){ae(),H.getMe().then((function(e){Z=e.id,console.log(Z)})).catch((function(e){console.error(e)}))}function ie(){return ce.apply(this,arguments)}function ce(){return(ce=Object(k.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,n=0;case 2:if(!(n<ee)){e.next=8;break}return e.next=5,H.getMySavedTracks({limit:t,offset:n}).then((function(e){ee=e.total,se(e.items),console.log(e.offset)})).catch((function(e){console.error(e),console.error("ERROR: Error getting saved tracks")}));case 5:n+=t,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){var t=[];e.forEach((function(e){t.push(e.track.id)})),H.getAudioFeaturesForTracks(t).then((function(t){var n=0;t.audio_features.forEach((function(t){te.push({id:t.id,uri:t.uri,name:e[n++].track.name,energy:t.energy,danceability:t.danceability,tempo:t.tempo})})),function(){var e=[];te.forEach((function(t){t.energy>=i/10&&t.danceability>=l/10&&t.tempo>=p&&e.push(t.uri)})),ne=e,console.log(ne)}()})).catch((function(e){console.error(e),console.error("Error getting audio features for tracks")}))}function oe(){return le.apply(this,arguments)}function le(){return(le=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.createPlaylist(Z,{name:Y,description:"Liked Songs filtered by Energy: ".concat(i/10,", Danceability: ").concat(l/10,", and Tempo: ").concat(p,". Created with https://achapcomputing.github.io/pumpify/"),public:!0}).then((function(e){console.log("MAKING PLAYLIST! "+e.id),$=e.id,console.log("hi "+$)})).catch((function(e){console.error(e),console.error("ERROR: Error creating playlist")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return de.apply(this,arguments)}function de(){return(de=Object(k.a)(w.a.mark((function e(){var t,n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=100,n=0;case 2:if(!(n<ne.length)){e.next=9;break}return a=ne.slice(n,n+t),e.next=6,H.addTracksToPlaylist($,a).then((function(){console.log("added!")})).catch((function(e){console.error(e),console.error("ERROR: Error adding workout tracks to playlist")}));case 6:n+=t,e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),C(!1),e.next=4,re();case 4:return e.next=6,ie();case 6:return e.next=8,oe();case 8:return e.next=10,ue();case 10:""!==$&&g($),ne.length>0&&(S(!1),C(!0),G(ne.length)),console.log("help! "+$);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{children:[Object(a.jsxs)(A.a,{fluid:!0,children:[Object(a.jsxs)(z.a,{children:[Object(a.jsx)(B.a,{sm:"8",children:Object(a.jsx)(U.a,{value:i,onChange:function(e){return c(e.target.value)},min:0,max:10,tooltip:"off",variant:"secondary"})}),Object(a.jsxs)(B.a,{sm:"4","text-align":"right",children:["Minimum Energy Rating: ",i/10,Object(a.jsx)(I.a,{placement:"right",overlay:K,children:Object(a.jsx)(O.a,{id:"infoPopover",size:"sm",variant:"outline-primary",children:"?"})})]})]}),Object(a.jsxs)(z.a,{children:[Object(a.jsx)(B.a,{sm:"8",children:Object(a.jsx)(U.a,{value:l,onChange:function(e){return u(e.target.value)},min:0,max:10,tooltip:"off",variant:"secondary"})}),Object(a.jsxs)(B.a,{sm:"4","text-align":"right",children:["Minimum Danceability Rating: ",l/10,Object(a.jsx)(I.a,{placement:"right",overlay:J,children:Object(a.jsx)(O.a,{id:"infoPopover",size:"sm",variant:"outline-primary",children:"?"})})]})]}),Object(a.jsxs)(z.a,{children:[Object(a.jsx)(B.a,{sm:"8",children:Object(a.jsx)(U.a,{value:p,onChange:function(e){return b(e.target.value)},min:0,max:200,tooltip:"off",variant:"secondary"})}),Object(a.jsxs)(B.a,{sm:"4","text-align":"right",children:["Minimum Tempo: ",p," bpm",Object(a.jsx)(I.a,{placement:"right",overlay:V,children:Object(a.jsx)(O.a,{id:"infoPopover",size:"sm",variant:"outline-primary",children:"?"})})]})]})]}),Object(a.jsx)(A.a,{children:Object(a.jsx)(z.a,{className:"center",children:Object(a.jsxs)(M.a,{className:"mb-3 w-50",children:[Object(a.jsx)(M.a.Prepend,{children:Object(a.jsx)(M.a.Text,{id:"basic-addon1",children:"Playlist Name"})}),Object(a.jsx)(D.a,{placeholder:e,"aria-label":e,"aria-describedby":"basic-addon1",className:"w-75",ref:X,onChange:function(){return Q(X.current.value)}})]})})}),Object(a.jsxs)(A.a,{className:"Generate",children:[Object(a.jsx)(z.a,{children:Object(a.jsx)(O.a,{id:"createButton",variant:"outline-primary",onClick:function(){return function(){return he.apply(this,arguments)}()},disabled:T,children:"Generate Playlist"})}),Object(a.jsxs)(z.a,{className:"center",children:[T&&Object(a.jsx)(F.a,{animation:"grow",variant:"primary"}),v&&m&&Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"lead text-secondary",children:Object(a.jsx)("a",{href:"https://open.spotify.com/playlist/".concat(m),target:"_blank",children:"Playlist Created!"})}),Object(a.jsxs)("p",{className:"text-secondary",children:[L," Songs Added"]})]})]})]})]})};var Y=function(){var e,t=new URLSearchParams(window.location.hash.substring(1));return e=""!==T("rate_limit_message")?Object(a.jsxs)("div",{id:"rateLimitMessage",className:"lead",children:[Object(a.jsx)("p",{children:Object(a.jsx)(f.a,{icon:["fas","bolt"],style:{fontSize:"50px",marginBottom:"20px"}})}),Object(a.jsxs)("p",{children:["Oops, Exportify has encountered a ",Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://developer.spotify.com/web-api/user-guide/#rate-limiting",children:"rate limiting"})," error while using the Spotify API. This might be because of the number of users currently exporting playlists, or perhaps because you have too many playlists to export all at once. Try ",Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/watsonbox/exportify/issues/6#issuecomment-110793132",children:"creating your own"})," Spotify application. If that doesn't work, please add a comment to ",Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/watsonbox/exportify/issues/6",children:"this issue"})," where possible resolutions are being discussed."]}),Object(a.jsx)("p",{style:{marginTop:"50px"},children:"It should still be possible to export individual playlists, particularly when using your own Spotify application."})]}):t.has("access_token")?Object(a.jsx)("div",{children:Object(a.jsx)(W,{})}):Object(a.jsx)(P,{}),Object(a.jsxs)("div",{className:"App container",children:[Object(a.jsxs)("header",{className:"App-header",children:[t.has("access_token")&&Object(a.jsx)(_,{}),Object(a.jsxs)("h1",{children:[Object(a.jsx)(f.a,{icon:["fab","spotify"],color:"#84BD00",size:"sm"})," ",Object(a.jsx)("a",{href:"/pumpify",children:"Pumpify"})]}),Object(a.jsx)("p",{id:"subtitle",className:"lead text-secondary",children:"Generating high-intensity playlists for the most pumped-up workout"})]}),e,Object(a.jsxs)("footer",{className:"App-footer",children:[Object(a.jsxs)("p",{id:"subtitle",className:"lead text-secondary",children:["Based on ",Object(a.jsx)("a",{href:"https://watsonbox.github.io/exportify/",target:"_blank",children:"Exportify by Watsonbox"})]}),Object(a.jsxs)("p",{id:"subtitle",className:"lead text-secondary",children:["View ",Object(a.jsx)("a",{href:"https://github.com/achapcomputing/pumpify/",target:"_blank",children:"GitHub Repository"})]})]})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};n(143).shim(),s.a.start({apiKey:"a65916528275f084a1754a59797a36b3",plugins:[new l.a],redactedKeys:["Authorization"],enabledReleaseStages:["production","staging"],onError:function(e){e.request.url="[REDACTED]",e.originalError.isAxiosError&&(e.groupingHash=e.originalError.message)}});var X=s.a.getPlugin("react").createErrorBoundary(i.a);d.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(X,{children:Object(a.jsx)(Y,{})})}),document.getElementById("root")),Q()},51:function(e,t,n){},52:function(e,t,n){}},[[183,1,2]]]);
//# sourceMappingURL=main.82c53188.chunk.js.map