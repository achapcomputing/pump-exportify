{"version":3,"sources":["icons.jsx","helpers.tsx","components/Login.jsx","components/Logout.tsx","components/PlaylistGenerator.jsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["library","add","fab","faCheckCircle","faTimesCircle","faFileArchive","faHeart","faBolt","faMusic","faDownload","faCog","faSearch","faTimes","faSignOutAlt","getQueryParam","name","replace","results","RegExp","exec","window","location","search","decodeURIComponent","limiter","Bottleneck","maxConcurrent","minTime","on","error","jobInfo","a","response","status","retryCount","headers","Bugsnag","notify","event","addMetadata","config","groupingHash","wrap","url","accessToken","axios","get","Login","clientId","changeUser","href","encodeURIComponent","protocol","host","pathname","join","Button","id","type","variant","size","onClick","this","authorize","icon","React","Component","Logout","handleClick","split","title","spotifyApi","SpotifyWebApi","PlaylistGenerator","useState","energyFilter","energyValue","setEnergyValue","danceabilityFilter","danceValue","setDanceValue","tempoValue","setTempoValue","playlistId","playlistLinkId","setPlaylistLinkId","playlistCreated","setPlaylistCreated","playlistLoading","setPlaylistLoading","playlistLength","setPlaylistLength","userId","totalSaved","savedTracks","filteredUris","setUserToken","token","e","hashParams","r","q","hash","substring","getHashParams","access_token","setAccessToken","getMyUserId","getMe","then","console","log","catch","err","getMySavedTracks","offset","i","limit","total","getTrackAudioFeatures","items","tracks","ids","forEach","t","push","track","getAudioFeaturesForTracks","audio_features","uri","energy","danceability","tempo","filtered","filterTracks","createPlaylist","description","public","addTracksToPlaylist","length","uris","slice","Container","fluid","Row","Col","value","onChange","target","min","max","tooltip","md","text-align","className","generatePlaylist","Spinner","animation","App","view","key","URLSearchParams","style","fontSize","marginBottom","rel","marginTop","has","color","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","require","shim","start","apiKey","plugins","BugsnagPluginReact","redactedKeys","enabledReleaseStages","onError","request","originalError","isAxiosError","message","ErrorBoundary","getPlugin","createErrorBoundary","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f9714629.chunk.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { fab } from '@fortawesome/free-brands-svg-icons'\r\nimport { faCheckCircle, faTimesCircle, faFileArchive, faHeart } from '@fortawesome/free-regular-svg-icons'\r\nimport { faBolt, faMusic, faDownload, faCog, faSearch, faTimes, faSignOutAlt } from '@fortawesome/free-solid-svg-icons'\r\n\r\nlibrary.add(\r\n  fab,\r\n  faCheckCircle,\r\n  faTimesCircle,\r\n  faFileArchive,\r\n  faHeart,\r\n  faBolt,\r\n  faMusic,\r\n  faDownload,\r\n  faCog,\r\n  faSearch,\r\n  faTimes,\r\n  faSignOutAlt\r\n)\r\n","import Bugsnag from \"@bugsnag/js\"\r\nimport axios from \"axios\"\r\nimport Bottleneck from \"bottleneck\"\r\n\r\n// http://stackoverflow.com/a/901144/4167042\r\nexport function getQueryParam(name: string) {\r\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\r\n      results = regex.exec(window.location.search);\r\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n}\r\n\r\nconst REQUEST_RETRY_BUFFER = 1000\r\nconst MAX_RATE_LIMIT_RETRIES = 2 // 3 attempts in total\r\nconst limiter = new Bottleneck({\r\n  maxConcurrent: 1,\r\n  minTime: 0\r\n})\r\n\r\nlimiter.on(\"failed\", async (error, jobInfo) => {\r\n  if (error.response.status === 429 && jobInfo.retryCount < MAX_RATE_LIMIT_RETRIES) {\r\n    // Retry according to the indication from the server with a small buffer\r\n    return ((error.response.headers[\"retry-after\"] || 1) * 1000) + REQUEST_RETRY_BUFFER\r\n  } else if (error.response.status !== 401 && error.response.status !== 429 && jobInfo.retryCount === 0) {\r\n    // Log and retry any other failure once (e.g. 503/504 which sometimes occur)\r\n    Bugsnag.notify(\r\n      error,\r\n      (event) => {\r\n        event.addMetadata(\"response\", error.response)\r\n        event.addMetadata(\"request\", error.config)\r\n        event.groupingHash = \"Retried Request\"\r\n      }\r\n    )\r\n\r\n    return REQUEST_RETRY_BUFFER\r\n  }\r\n})\r\n\r\nexport const apiCall = limiter.wrap(function(url: string, accessToken: string) {\r\n  return axios.get(url, { headers: { 'Authorization': 'Bearer ' + accessToken } })\r\n})\r\n\r\nexport function apiCallErrorHandler(error: any) {\r\n  if (error.isAxiosError) {\r\n    if (error.request.status === 401) {\r\n      // Return to home page after auth token expiry\r\n      window.location.href = window.location.href.split('#')[0]\r\n      return\r\n    }\r\n  }\r\n\r\n  throw error\r\n}\r\n","import React from \"react\"\r\nimport { Button } from \"react-bootstrap\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\nimport { getQueryParam } from \"helpers\"\r\n\r\nclass Login extends React.Component {\r\n  authorize() {\r\n    // let clientId = \"b8267324f80b4a9b9ba8c410e566b844\"\r\n    let clientId = getQueryParam(\"app_client_id\")\r\n    let changeUser = getQueryParam(\"change_user\") !== \"\"\r\n\r\n    // Use Pumpify application clientId if none given\r\n    if (clientId === '') {\r\n      clientId = \"b8267324f80b4a9b9ba8c410e566b844\"\r\n    }\r\n\r\n    window.location.href = \"https://accounts.spotify.com/authorize\" +\r\n      \"?client_id=\" + clientId +\r\n      \"&redirect_uri=\" + encodeURIComponent([window.location.protocol, '//', window.location.host, window.location.pathname].join('')) +\r\n      \"&scope=user-library-read%20playlist-modify-public\" +\r\n      \"&response_type=token\" +\r\n      \"&show_dialog=\" + changeUser;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Button id=\"loginButton\" type=\"submit\" variant=\"outline-secondary\" size=\"lg\" onClick={this.authorize}>\r\n        <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" /> Get Started\r\n      </Button>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login\r\n","import React from \"react\"\r\nimport { Button } from \"react-bootstrap\"\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\r\n\r\nclass Logout extends React.Component {\r\n  handleClick = () => {\r\n    window.location.href = `${window.location.href.split('#')[0]}?change_user=true`\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Button id=\"logoutButton\" type=\"submit\" variant=\"link\" size=\"lg\" onClick={this.handleClick} title=\"Change user\">\r\n        <FontAwesomeIcon icon={['fas', 'sign-out-alt']} size=\"lg\" />\r\n      </Button>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Logout\r\n","import '../App.scss'\r\nimport '../index.scss'\r\n\r\nimport React, { useState } from 'react';\r\nimport { Button, Container, Row, Col, Spinner } from \"react-bootstrap\"\r\nimport RangeSlider from 'react-bootstrap-range-slider';\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\n\r\nconst spotifyApi = new SpotifyWebApi();\r\n\r\nconst PlaylistGenerator = () => {\r\n\r\n    const energyFilter = 0.7;\r\n    const danceabilityFilter = 0.5;\r\n    const tempoFilter = 120;\r\n\r\n    const [ energyValue, setEnergyValue ] = useState(energyFilter * 10);\r\n    const [ danceValue, setDanceValue ] = useState(danceabilityFilter * 10);\r\n    const [ tempoValue, setTempoValue ] = useState(tempoFilter);\r\n    const [ playlistLinkId, setPlaylistLinkId ] = useState(playlistId);\r\n    const [ playlistCreated, setPlaylistCreated ] = useState(false);\r\n    const [ playlistLoading, setPlaylistLoading ] = useState(false);\r\n    const [ playlistLength, setPlaylistLength ] = useState(0);\r\n\r\n    var userId = \"\";\r\n    var playlistId = \"\";\r\n    var totalSaved = 3000;\r\n    var savedTracks = [];\r\n    var filteredUris = [];\r\n\r\n    function getHashParams() {\r\n        var hashParams = {};\r\n        var e, r = /([^&;=]+)=?([^&;]*)/g,\r\n          q = window.location.hash.substring(1);\r\n        e = r.exec(q)\r\n        while (e) {\r\n          hashParams[e[1]] = decodeURIComponent(e[2]);\r\n          e = r.exec(q);\r\n        }\r\n        return hashParams;\r\n      }\r\n    \r\n    function setUserToken() {\r\n        const params = getHashParams();\r\n        const token = params.access_token;\r\n        if (token) {\r\n          spotifyApi.setAccessToken(token);\r\n        }\r\n    }\r\n    \r\n    function getMyUserId() {\r\n        setUserToken();\r\n        spotifyApi.getMe()\r\n          .then((response) => {\r\n            userId = response.id;\r\n            console.log(userId);\r\n        })\r\n        .catch((err) => {\r\n            console.error(err);\r\n        })\r\n    }\r\n\r\n    async function getMySavedTracks() {\r\n        const offset = 50;\r\n        for (var i = 0; i < totalSaved; i += offset) {\r\n          await spotifyApi.getMySavedTracks({ limit: offset, offset: i })\r\n            .then((response) => {\r\n              totalSaved = response.total\r\n              getTrackAudioFeatures(response.items);\r\n              console.log(response.offset);\r\n            })\r\n            .catch((err) => {\r\n              console.error(err);\r\n              console.error(\"ERROR: Error getting saved tracks\");\r\n            })\r\n        }\r\n    }\r\n\r\n    function getTrackAudioFeatures(tracks) {\r\n        const ids = [];\r\n        tracks.forEach(t => {\r\n          ids.push(t.track.id);\r\n        })\r\n        spotifyApi.getAudioFeaturesForTracks(ids)\r\n            .then((response) => {\r\n                var i = 0;\r\n                response.audio_features.forEach(t => {\r\n                    savedTracks.push({\r\n                        id: t.id,\r\n                        uri: t.uri,\r\n                        name: tracks[i++].track.name,\r\n                        energy: t.energy,\r\n                        danceability: t.danceability,\r\n                        tempo: t.tempo\r\n                    })\r\n                })\r\n                filterTracks();\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n                console.error(\"Error getting audio features for tracks\")\r\n        })\r\n    }\r\n\r\n    function filterTracks() {\r\n        const filtered = [];\r\n        savedTracks.forEach(t => {\r\n            if (t.energy >= (energyValue / 10.0) && t.danceability >= (danceValue / 10.0) && t.tempo >= tempoValue) {\r\n                filtered.push(t.uri);\r\n            }\r\n        });\r\n        filteredUris = filtered;\r\n        console.log(filteredUris);\r\n    }\r\n\r\n    async function createPlaylist() {\r\n        await spotifyApi.createPlaylist(userId, \r\n        { \r\n            name: \"API Playlist\",\r\n            description: `Liked Songs filtered by Energy: ${energyValue / 10.0}, Danceability: ${danceValue / 10.0}, and Tempo: ${tempoValue}. Created with https://achapcomputing.github.io/pump-exportify/`,\r\n            public: true\r\n        })\r\n        .then((response) => {\r\n            console.log(\"MAKING PLAYLIST! \" + response.id);\r\n            playlistId = response.id\r\n            console.log(\"hi \" + playlistId);\r\n        })\r\n        .catch((err) => {\r\n            console.error(err);\r\n            console.error(\"ERROR: Error creating playlist\");\r\n        })\r\n    }\r\n\r\n    async function addTracksToPlaylist() {\r\n        const offset = 100;\r\n        for (var i = 0; i < filteredUris.length; i += offset) {\r\n            const uris = filteredUris.slice(i, i + offset);\r\n            await spotifyApi.addTracksToPlaylist(playlistId, uris)\r\n            .then(() => {\r\n                console.log(\"added!\");\r\n            })\r\n            .catch((err) => {\r\n                console.error(err);\r\n                console.error(\"ERROR: Error adding workout tracks to playlist\")\r\n            })\r\n        }\r\n    }\r\n    \r\n    async function generatePlaylist() {\r\n        setPlaylistLoading(true);\r\n        setPlaylistCreated(false);\r\n        await getMyUserId();\r\n        // get saved songs\r\n        await getMySavedTracks()\r\n        // filter saved songs\r\n        // create new playlist\r\n        await createPlaylist();\r\n        // add songs to playlist\r\n        await addTracksToPlaylist();\r\n        if (playlistId !== \"\") {\r\n            setPlaylistLinkId(playlistId);\r\n        }\r\n        if (filteredUris.length > 0) {\r\n            setPlaylistLoading(false);\r\n            setPlaylistCreated(true);\r\n            setPlaylistLength(filteredUris.length);\r\n        }\r\n        console.log(\"help! \" + playlistId)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Container fluid>\r\n                <Row>\r\n                    <Col>\r\n                        <RangeSlider\r\n                            value={energyValue}\r\n                            onChange={e => setEnergyValue(e.target.value)}\r\n                            min={0}\r\n                            max={10}\r\n                            tooltip='off'\r\n                            variant=\"secondary\"\r\n                        />\r\n                    </Col>\r\n                    <Col md=\"4\" text-align=\"right\">Minimum Energy Rating: {energyValue / 10.0}</Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <RangeSlider\r\n                            value={danceValue}\r\n                            onChange={e => setDanceValue(e.target.value)}\r\n                            min={0}\r\n                            max={10}\r\n                            tooltip='off'\r\n                            variant='secondary'\r\n                        />\r\n                    </Col>\r\n                    <Col md=\"4\" text-align=\"right\">Minimum Danceability Rating: {danceValue / 10.0}</Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col>\r\n                        <RangeSlider\r\n                            value={tempoValue}\r\n                            onChange={e => setTempoValue(e.target.value)}\r\n                            min={0}\r\n                            max={200}\r\n                            tooltip='off'\r\n                            variant='secondary'\r\n                        />\r\n                    </Col>\r\n                    <Col md=\"4\" text-align=\"right\">Minimum Tempo: {tempoValue} bpm</Col>\r\n                </Row>\r\n            </Container>\r\n\r\n            <Container className=\"Generate\">\r\n                <Row>\r\n                    <Button id=\"createButton\" variant=\"outline-secondary\" onClick={() => generatePlaylist()}>Generate Playlist</Button>\r\n                </Row>\r\n                <Row className=\"center\">\r\n                    {\r\n                        playlistLoading &&\r\n                        <Spinner animation=\"grow\" variant='primary' />\r\n                    }\r\n                    {\r\n                        playlistCreated && playlistLinkId &&\r\n                        <div>\r\n                            <p className=\"lead text-secondary\">\r\n                                <a href={`https://open.spotify.com/playlist/${playlistLinkId}`} target=\"_blank\">Playlist Created!</a>\r\n                            </p>\r\n                            <p className=\"text-secondary\">\r\n                                {playlistLength} Songs Added\r\n                            </p>                            \r\n                        </div>\r\n                    }\r\n                </Row>\r\n            </Container>\r\n\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default PlaylistGenerator;","import './App.scss'\r\nimport \"./icons\"\r\n\r\nimport React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport 'react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css';\r\nimport \"url-search-params-polyfill\"\r\n\r\nimport Login from 'components/Login'\r\nimport PlaylistTable from \"components/PlaylistTable\"\r\nimport { getQueryParam } from \"helpers\"\r\nimport Logout from \"components/Logout\"\r\nimport FilterSliders from 'components/FilterSliders'\r\nimport PlaylistGenerator from 'components/PlaylistGenerator';\r\n\r\nfunction App() {\r\n  let view\r\n  let key = new URLSearchParams(window.location.hash.substring(1))\r\n\r\n  if (getQueryParam('rate_limit_message') !== '') {\r\n    view = <div id=\"rateLimitMessage\" className=\"lead\">\r\n      <p><FontAwesomeIcon icon={['fas', 'bolt']} style={{ fontSize: \"50px\", marginBottom: \"20px\" }} /></p>\r\n      <p>Oops, Exportify has encountered a <a target=\"_blank\" rel=\"noreferrer\" href=\"https://developer.spotify.com/web-api/user-guide/#rate-limiting\">rate limiting</a> error while using the Spotify API. This might be because of the number of users currently exporting playlists, or perhaps because you have too many playlists to export all at once. Try <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6#issuecomment-110793132\">creating your own</a> Spotify application. If that doesn't work, please add a comment to <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6\">this issue</a> where possible resolutions are being discussed.</p>\r\n      <p style={{ marginTop: \"50px\" }}>It should still be possible to export individual playlists, particularly when using your own Spotify application.</p>\r\n    </div>\r\n  } else if (key.has('access_token')) {\r\n    view = <div>\r\n      <PlaylistGenerator />\r\n      {/* <PumpPlaylistGenerator accessToken={key.get('access_token')} /> */}\r\n      {/* <SongTable accessToken={key.get('access_token')} /> */}\r\n      {/* <PlaylistTable accessToken={key.get('access_token')} /> */}\r\n    </div>\r\n  } else {\r\n    view = <Login />\r\n  }\r\n\r\n  return (\r\n    <div className=\"App container\">\r\n      <header className=\"App-header\">\r\n        { key.has('access_token') && <Logout /> }\r\n        <h1>\r\n          <FontAwesomeIcon icon={['fab', 'spotify']} color=\"#84BD00\" size=\"sm\" /> <a href={process.env.PUBLIC_URL}>Pumpify</a>\r\n        </h1>\r\n\r\n        <p id=\"subtitle\" className=\"lead text-secondary\">\r\n          Generating high-intensity playlists for the most pumped-up workout\r\n        </p>\r\n      </header>\r\n\r\n      {view}\r\n\r\n      <footer className=\"App-footer\">\r\n        <p id=\"subtitle\" className=\"lead text-secondary\">\r\n          Based on <a href=\"https://watsonbox.github.io/exportify/\" target=\"_blank\">Exportify by Watsonbox</a> \r\n        </p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\"\r\nimport Bugsnag from '@bugsnag/js'\r\nimport BugsnagPluginReact from '@bugsnag/plugin-react'\r\nimport ReactDOM from \"react-dom\"\r\nimport \"./index.scss\"\r\nimport App from \"./App\"\r\nimport reportWebVitals from \"./reportWebVitals\"\r\n\r\n// https://caniuse.com/mdn-javascript_builtins_array_flatmap\r\nrequire('array.prototype.flatmap').shim()\r\n\r\nBugsnag.start({\r\n  apiKey: 'a65916528275f084a1754a59797a36b3',\r\n  plugins: [new BugsnagPluginReact()],\r\n  redactedKeys: ['Authorization'],\r\n  enabledReleaseStages: [ 'production', 'staging' ],\r\n  onError: function (event) {\r\n    event.request.url = \"[REDACTED]\" // Don't send access tokens\r\n\r\n    if (event.originalError.isAxiosError) {\r\n      event.groupingHash = event.originalError.message\r\n    }\r\n  }\r\n})\r\n\r\nconst ErrorBoundary = Bugsnag.getPlugin('react')!.createErrorBoundary(React)\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <ErrorBoundary>\r\n      <App />\r\n    </ErrorBoundary>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}