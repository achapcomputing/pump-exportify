(this.webpackJsonppumpify=this.webpackJsonppumpify||[]).push([[0],{142:function(e,t){},175:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),i=n.n(a),o=n(25),c=n.n(o),s=n(77),l=n.n(s),u=n(78),p=n.n(u),d=(n(89),n(46),n(26)),h=n(79),f=n(27),b=n(14);d.b.add(h.a,f.a,f.d,f.b,f.c,b.a,b.d,b.c,b.b,b.e,b.g,b.f);var j=n(15),g=(n(94),n(95),n(28)),x=n(29),y=n(31),m=n(30),O=n(179),v=n(4),w=n.n(v),k=n(16),C=n(80),E=n.n(C),R=n(81);function S(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}var _=new(n.n(R).a)({maxConcurrent:1,minTime:0});_.on("failed",function(){var e=Object(k.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(429===t.response.status&&n.retryCount<2)){e.next=4;break}return e.abrupt("return",1e3*(t.response.headers["retry-after"]||1)+1e3);case 4:if(401===t.response.status||429===t.response.status||0!==n.retryCount){e.next=7;break}return c.a.notify(t,(function(e){e.addMetadata("response",t.response),e.addMetadata("request",t.config),e.groupingHash="Retried Request"})),e.abrupt("return",1e3);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());_.wrap((function(e,t){return E.a.get(e,{headers:{Authorization:"Bearer "+t}})}));var T=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"authorize",value:function(){var e=S("app_client_id"),t=""!==S("change_user");""===e&&(e="b8267324f80b4a9b9ba8c410e566b844"),window.location.href="https://accounts.spotify.com/authorize?client_id="+e+"&redirect_uri="+encodeURIComponent([window.location.protocol,"//",window.location.host,window.location.pathname].join(""))+"&scope=user-library-read%20playlist-modify-public&response_type=token&show_dialog="+t}},{key:"render",value:function(){return Object(r.jsxs)(O.a,{id:"loginButton",type:"submit",variant:"outline-secondary",size:"lg",onClick:this.authorize,children:[Object(r.jsx)(j.a,{icon:["far","check-circle"],size:"sm"})," Get Started"]})}}]),n}(i.a.Component),A=function(e){Object(y.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){window.location.href="".concat(window.location.href.split("#")[0],"?change_user=true")},e}return Object(x.a)(n,[{key:"render",value:function(){return Object(r.jsx)(O.a,{id:"logoutButton",type:"submit",variant:"link",size:"lg",onClick:this.handleClick,title:"Change user",children:Object(r.jsx)(j.a,{icon:["fas","sign-out-alt"],size:"lg"})})}}]),n}(i.a.Component),P=n(20),z=n(176),I=n(177),B=n(178),M=n(32),L=n.n(M),N=n(82),D=new(n.n(N).a),F=function(){var e=Object(a.useState)(7),t=Object(P.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(5),c=Object(P.a)(o,2),s=c[0],l=c[1],u=Object(a.useState)(120),p=Object(P.a)(u,2),d=p[0],h=p[1],f=Object(a.useState)(E),b=Object(P.a)(f,2),j=b[0],g=b[1],x=Object(a.useState)(!1),y=Object(P.a)(x,2),m=y[0],v=y[1],C="",E="",R=[],S=[];function _(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);for(e=n.exec(r);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(r);return t}().access_token;e&&D.setAccessToken(e)}function T(){_(),D.getMe().then((function(e){C=e.id,console.log(C)})).catch((function(e){console.error(e)}))}function A(){return M.apply(this,arguments)}function M(){return(M=Object(k.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=50,n=0;case 2:if(!(n<2e3)){e.next=8;break}return e.next=5,D.getMySavedTracks({limit:t,offset:n}).then((function(e){e.total,N(e.items),console.log(e.offset)})).catch((function(e){console.error(e),console.error("ERROR: Error getting saved tracks")}));case 5:n+=t,e.next=2;break;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t=[];e.forEach((function(e){t.push(e.track.id)})),D.getAudioFeaturesForTracks(t).then((function(t){var r=0;t.audio_features.forEach((function(t){R.push({id:t.id,uri:t.uri,name:e[r++].track.name,energy:t.energy,danceability:t.danceability,tempo:t.tempo})})),function(){var e=[];R.forEach((function(t){t.energy>=n/10&&t.danceability>=s/10&&t.tempo>=d&&e.push(t.uri)})),S=e,console.log(S)}()})).catch((function(e){console.error(e),console.error("Error getting audio features for tracks")}))}function F(){return G.apply(this,arguments)}function G(){return(G=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.createPlaylist(C,{name:"API Playlist",description:"Liked Songs filtered by Energy: ".concat(n/10,", Danceability: ").concat(s/10,", and Tempo: ").concat(d,". Created with https://achapcomputing.github.io/pump-exportify/"),public:!0}).then((function(e){console.log("MAKING PLAYLIST! "+e.id),E=e.id,console.log("hi "+E)})).catch((function(e){console.error(e),console.error("ERROR: Error creating playlist")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return q.apply(this,arguments)}function q(){return(q=Object(k.a)(w.a.mark((function e(){var t,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=100,n=0;case 2:if(!(n<S.length)){e.next=9;break}return r=S.slice(n,n+t),e.next=6,D.addTracksToPlaylist(E,r).then((function(){console.log("added!")})).catch((function(e){console.error(e),console.error("ERROR: Error adding workout tracks to playlist")}));case 6:n+=t,e.next=2;break;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.next=4,A();case 4:return e.next=6,F();case 6:return e.next=8,U();case 8:""!==E&&g(E),S.length>0&&v(!0),console.log("help! "+E);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{children:[Object(r.jsxs)(z.a,{fluid:!0,children:[Object(r.jsxs)(I.a,{children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(L.a,{value:n,onChange:function(e){return i(e.target.value)},min:0,max:10,tooltip:"off"})}),Object(r.jsxs)(B.a,{md:"4","text-align":"right",children:["Minimum Energy Rating: ",n/10]})]}),Object(r.jsxs)(I.a,{children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(L.a,{value:s,onChange:function(e){return l(e.target.value)},min:0,max:10,tooltip:"off"})}),Object(r.jsxs)(B.a,{md:"4","text-align":"right",children:["Minimum Danceability Rating: ",s/10]})]}),Object(r.jsxs)(I.a,{children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(L.a,{value:d,onChange:function(e){return h(e.target.value)},min:0,max:200,tooltip:"off"})}),Object(r.jsxs)(B.a,{md:"4","text-align":"right",children:["Minimum Tempo: ",d," bpm"]})]})]}),Object(r.jsxs)(z.a,{fluid:!0,className:"Generate",children:[Object(r.jsx)(I.a,{children:Object(r.jsx)(O.a,{id:"createButton",variant:"outline-secondary",onClick:function(){return function(){return K.apply(this,arguments)}()},children:"Generate Playlist"})}),Object(r.jsx)(I.a,{children:m&&j&&Object(r.jsx)("p",{id:"playlistLink",className:"lead text-secondary",position:"relative",children:Object(r.jsx)("a",{href:"https://open.spotify.com/playlist/".concat(j),target:"_blank",children:"Playlist Created!"})})})]})]})};var G=function(){var e,t=new URLSearchParams(window.location.hash.substring(1));return e=""!==S("rate_limit_message")?Object(r.jsxs)("div",{id:"rateLimitMessage",className:"lead",children:[Object(r.jsx)("p",{children:Object(r.jsx)(j.a,{icon:["fas","bolt"],style:{fontSize:"50px",marginBottom:"20px"}})}),Object(r.jsxs)("p",{children:["Oops, Exportify has encountered a ",Object(r.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://developer.spotify.com/web-api/user-guide/#rate-limiting",children:"rate limiting"})," error while using the Spotify API. This might be because of the number of users currently exporting playlists, or perhaps because you have too many playlists to export all at once. Try ",Object(r.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/watsonbox/exportify/issues/6#issuecomment-110793132",children:"creating your own"})," Spotify application. If that doesn't work, please add a comment to ",Object(r.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/watsonbox/exportify/issues/6",children:"this issue"})," where possible resolutions are being discussed."]}),Object(r.jsx)("p",{style:{marginTop:"50px"},children:"It should still be possible to export individual playlists, particularly when using your own Spotify application."})]}):t.has("access_token")?Object(r.jsx)("div",{children:Object(r.jsx)(F,{})}):Object(r.jsx)(T,{}),Object(r.jsxs)("div",{className:"App container",children:[Object(r.jsxs)("header",{className:"App-header",children:[t.has("access_token")&&Object(r.jsx)(A,{}),Object(r.jsxs)("h1",{children:[Object(r.jsx)(j.a,{icon:["fab","spotify"],color:"#84BD00",size:"sm"})," ",Object(r.jsx)("a",{href:"/pump-exportify",children:"Pumpify"})]}),Object(r.jsx)("p",{id:"subtitle",className:"lead text-secondary",children:"Create Spotify playlist from your Liked Songs to get Pumped"})]}),e,Object(r.jsx)("footer",{className:"App-footer",children:Object(r.jsxs)("p",{id:"subtitle",className:"lead text-secondary",children:["Based on ",Object(r.jsx)("a",{href:"https://watsonbox.github.io/exportify/",target:"_blank",children:"Exportify by Watsonbox"})]})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};n(135).shim(),c.a.start({apiKey:"a65916528275f084a1754a59797a36b3",plugins:[new l.a],redactedKeys:["Authorization"],enabledReleaseStages:["production","staging"],onError:function(e){e.request.url="[REDACTED]",e.originalError.isAxiosError&&(e.groupingHash=e.originalError.message)}});var q=c.a.getPlugin("react").createErrorBoundary(i.a);p.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(q,{children:Object(r.jsx)(G,{})})}),document.getElementById("root")),U()},46:function(e,t,n){},89:function(e,t,n){}},[[175,1,2]]]);
//# sourceMappingURL=main.2f8c8b54.chunk.js.map